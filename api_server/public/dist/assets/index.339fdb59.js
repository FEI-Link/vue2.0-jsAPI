import{r as c,o as $,c as z,a as E,b as B,l as D,d as q,e as U,m as F,f as M,g as s,w as a,h as P,p as W,i as H,j as h,N as b,k as G,n as J,q as Q,s as X}from"./vendor.664487fe.js";const Y=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}};Y();var S=(e,o)=>{const r=e.__vccOpts||e;for(const[n,t]of o)r[n]=t;return r};const Z={name:"App",setup(){}};function ee(e,o,r,n,t,i){const l=c("router-view");return $(),z(l)}var te=S(Z,[["render",ee]]);const oe="modulepreload",x={},ne="/",p=function(o,r){return!r||r.length===0?o():Promise.all(r.map(n=>{if(n=`${ne}${n}`,n in x)return;x[n]=!0;const t=n.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const l=document.createElement("link");if(l.rel=t?"stylesheet":oe,t||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),t)return new Promise((k,_)=>{l.addEventListener("load",k),l.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>o())},u={title:"\u4FE1\u606F\u67E5\u8BE2\u5E73\u53F0",tokenKey:"web_jwt_token_",timeout:1e4,tokenPrefix:"bearer ",jwtTokenKey:"web_jwt_token_"};function f(){return E.get(u.tokenKey)}function re(e){return E.set(u.tokenKey,e)}function O(){return E.remove(u.tokenKey)}const g=B.create({baseURL:{}.VITE_BASE_URL,timeout:u.timeout});g.interceptors.request.use(e=>(e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),f()&&(e.headers.Authorization=u.tokenPrefix+f()),e),e=>Promise.reject(e));g.interceptors.response.use(e=>{const o=e.data;return o.status==="5001"&&(O(),j.push({path:"/login"}).catch(()=>{console.log("\u8BF7\u5148\u767B\u5F55")})),o},e=>Promise.reject(e));function se(e,o,r){return g({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"api/login",method:"post",data:D.stringify(e)})}function ae(){return g({headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"api/logout",method:"post"})}const ie={state:{token:"",user:{},jwtToken:f()},mutations:{SET_TOKEN:(e,o)=>{e.token=o},SET_USER:(e,o)=>{e.user=o}},actions:{Login({commit:e},o){return new Promise((r,n)=>{se(o).then(t=>{re(t.token),console.log(t.message),r()}).catch(t=>{n(t)})})},Logout({commit:e}){return new Promise((o,r)=>{ae().then(n=>{O(),o(n)}).catch(n=>{r(n)})})}}},le=e=>{e("SET_TOKEN",""),O()};var ce=Object.freeze(Object.defineProperty({__proto__:null,logOut:le,default:ie},Symbol.toStringTag,{value:"Module"}));const ue={token:e=>e.user.token},L={"./modules/user.js":ce},_e=Object.keys(L).reduce((e,o)=>{const r=o.replace(/^\.\modules\/(.*)\.\w+$/,"$1"),n=L[o];return e[r]=n.default,e},{}),C=new q({modules:_e,getters:ue});const pe={components:{Edit:U,IconMenu:F},setup(){return{}},methods:{logout(){C.dispatch("Logout").then(e=>{console.log(e.message),this.$router.push({path:"/login"})})}}},v=e=>(W("data-v-13877386"),e=e(),H(),e),de=P("\u9000\u51FA"),me=v(()=>h("span",null,"\u9996\u9875",-1)),fe=v(()=>h("span",null,"\u5730\u70B9\u6570\u91CF",-1)),he=v(()=>h("span",null,"\u8F68\u8FF9\u67E5\u8BE2",-1)),ge=v(()=>h("span",null,"\u53EF\u89C6\u5316\u5927\u5C4F",-1)),ve=P("Footer");function ye(e,o,r,n,t,i){const l=c("el-button"),k=c("el-header"),_=c("icon-menu"),d=c("el-icon"),m=c("el-menu-item"),A=c("edit"),I=c("el-menu"),N=c("el-aside"),R=c("router-view"),V=c("el-main"),K=c("el-footer"),w=c("el-container");return $(),M("div",null,[s(w,{style:{height:"100vh"}},{default:a(()=>[s(k,{height:"60px",style:{"background-color":"pink"}},{default:a(()=>[s(l,{type:"text",onClick:i.logout},{default:a(()=>[de]),_:1},8,["onClick"])]),_:1}),s(w,null,{default:a(()=>[s(N,{width:"200px",style:{"background-color":"orange"}},{default:a(()=>[s(I,{"active-text-color":"#ffd04b","background-color":"#545c64",class:"el-menu-vertical-demo","default-active":"2","text-color":"#fff",onOpen:e.handleOpen,onClose:e.handleClose,router:!0},{default:a(()=>[s(m,{index:"/"},{default:a(()=>[s(d,null,{default:a(()=>[s(_)]),_:1}),me]),_:1}),s(m,{index:"/placecount"},{default:a(()=>[s(d,{color:e.white},{default:a(()=>[s(A)]),_:1},8,["color"]),fe]),_:1}),s(m,{index:"/peopletrace"},{default:a(()=>[s(d,{color:"white"},{default:a(()=>[s(_)]),_:1}),he]),_:1}),s(m,{index:"/visualization"},{default:a(()=>[s(d,null,{default:a(()=>[s(_)]),_:1}),ge]),_:1})]),_:1},8,["onOpen","onClose"])]),_:1}),s(w,null,{default:a(()=>[s(V,null,{default:a(()=>[s(R)]),_:1}),s(K,{height:"30px"},{default:a(()=>[ve]),_:1})]),_:1})]),_:1})]),_:1})])}var ke=S(pe,[["render",ye],["__scopeId","data-v-13877386"]]);b.configure({showSpinner:!1});const we=[{path:"/",component:ke,children:[{path:"",name:"main",component:()=>p(()=>import("./index.c3253f2d.js"),["assets/index.c3253f2d.js","assets/vendor.664487fe.js"]),meta:{title:"\u9996\u9875"}},{path:"/placecount",name:"placecount",component:()=>p(()=>import("./index.b493fbfa.js"),["assets/index.b493fbfa.js","assets/index.ecee1122.css","assets/index.523ae83e.js","assets/vendor.664487fe.js"]),meta:{title:"\u5730\u70B9\u67E5\u8BE2"}},{path:"/peopletrace",name:"peopletrace",component:()=>p(()=>import("./index.6dc9ab1e.js"),["assets/index.6dc9ab1e.js","assets/index.523ae83e.js","assets/vendor.664487fe.js"]),meta:{title:"\u4EBA\u5458\u8FFD\u8E2A"}},{path:"/visualization",name:"visualization",component:()=>p(()=>import("./index.5d44cec2.js"),["assets/index.5d44cec2.js","assets/vendor.664487fe.js"]),meta:{title:"\u53EF\u89C6\u5316\u5927\u5C4F"}}]},{path:"/dashboard",redirect:"/"},{path:"/login",name:"login",component:()=>p(()=>import("./login.59773954.js"),["assets/login.59773954.js","assets/login.01b5e41d.css","assets/vendor.664487fe.js"]),meta:{title:"\u767B\u5F55"}}],T=G({history:J(),routes:we}),Ee=["/login"];T.beforeEach((e,o,r)=>{e.meta.title&&(document.title=e.meta.title+" - "+u.title),b.start(),f()?e.path==="/login"?r({path:"/"}):r():Ee.indexOf(e.path)!==-1?r():r("/login")});T.afterEach(()=>{b.done()});var j=T;const y=Q(te);y.use(C);y.use(j);y.use(X);y.mount("#app");export{S as _,g as s};
